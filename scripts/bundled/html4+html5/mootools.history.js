window.JSON||(window.JSON={});
(function(){function c(b){return 10>b?"0"+b:b}function p(b){e.lastIndex=0;return e.test(b)?'"'+b.replace(e,function(b){var a=n[b];return"string"===typeof a?a:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function k(b,e){var a,c,g,n,q=h,f,d=e[b];d&&("object"===typeof d&&"function"===typeof d.toJSON)&&(d=d.toJSON(b));"function"===typeof l&&(d=l.call(e,b,d));switch(typeof d){case "string":return p(d);case "number":return isFinite(d)?String(d):"null";case "boolean":case "null":return String(d);
case "object":if(!d)return"null";h+=r;f=[];if("[object Array]"===Object.prototype.toString.apply(d)){n=d.length;for(a=0;a<n;a+=1)f[a]=k(a,d)||"null";g=0===f.length?"[]":h?"[\n"+h+f.join(",\n"+h)+"\n"+q+"]":"["+f.join(",")+"]";h=q;return g}if(l&&"object"===typeof l){n=l.length;for(a=0;a<n;a+=1)c=l[a],"string"===typeof c&&(g=k(c,d))&&f.push(p(c)+(h?": ":":")+g)}else for(c in d)Object.hasOwnProperty.call(d,c)&&(g=k(c,d))&&f.push(p(c)+(h?": ":":")+g);g=0===f.length?"{}":h?"{\n"+h+f.join(",\n"+h)+"\n"+
q+"}":"{"+f.join(",")+"}";h=q;return g}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(b){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(b){return this.valueOf()});var g=window.JSON,b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h,r,n={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof g.stringify&&(g.stringify=function(b,e,a){var c;r=h="";if("number"===typeof a)for(c=0;c<a;c+=1)r+=" ";else"string"===typeof a&&(r=a);if((l=e)&&"function"!==typeof e&&("object"!==typeof e||"number"!==typeof e.length))throw Error("JSON.stringify");return k("",{"":b})});"function"!==
typeof g.parse&&(g.parse=function(e,c){function a(b,e){var q,f,d=b[e];if(d&&"object"===typeof d)for(q in d)Object.hasOwnProperty.call(d,q)&&(f=a(d,q),void 0!==f?d[q]=f:delete d[q]);return c.call(b,e,d)}var h;e=String(e);b.lastIndex=0;b.test(e)&&(e=e.replace(b,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(e.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
"")))return h=eval("("+e+")"),"function"===typeof c?a({"":h},""):h;throw new SyntaxError("JSON.parse");})})();/*
 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
 @license New BSD License <http://creativecommons.org/licenses/BSD/>
*/
(function(c,p){var k=c.History=c.History||{},g=c.Element;if("undefined"!==typeof k.Adapter)throw Error("History.js Adapter has already been loaded...");Object.append(g.NativeEvents,{popstate:2,hashchange:2});k.Adapter={bind:function(b,e,c){("string"===typeof b?document.id(b):b).addEvent(e,c)},trigger:function(b,e,c){("string"===typeof b?document.id(b):b).fireEvent(e,c)},extractEventData:function(b,e){return e&&e.event&&e.event[b]||e&&e[b]||p},onDomLoad:function(b){c.addEvent("domready",b)}};"undefined"!==
typeof k.init&&k.init()})(window);/*
 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
 @license New BSD License <http://creativecommons.org/licenses/BSD/>
*/
(function(c,p){var k=c.document,g=c.setInterval||g,b=c.History=c.History||{};if("undefined"!==typeof b.initHtml4)throw Error("History.js HTML4 Support has already been loaded...");b.initHtml4=function(){if("undefined"!==typeof b.initHtml4.initialized)return!1;b.initHtml4.initialized=!0;b.enabled=!0;b.savedHashes=[];b.isLastHash=function(e){var c=b.getHashByIndex();return e===c};b.saveHash=function(e){if(b.isLastHash(e))return!1;b.savedHashes.push(e);return!0};b.getHashByIndex=function(e){var c=null;
return c="undefined"===typeof e?b.savedHashes[b.savedHashes.length-1]:0>e?b.savedHashes[b.savedHashes.length+e]:b.savedHashes[e]};b.discardedHashes={};b.discardedStates={};b.discardState=function(e,c,g){var k=b.getHashByState(e);b.discardedStates[k]={discardedState:e,backState:g,forwardState:c};return!0};b.discardHash=function(e,c,g){b.discardedHashes[e]={discardedHash:e,backState:g,forwardState:c};return!0};b.discardedState=function(c){c=b.getHashByState(c);return b.discardedStates[c]||!1};b.discardedHash=
function(c){return b.discardedHashes[c]||!1};b.recycleState=function(c){var h=b.getHashByState(c);b.discardedState(c)&&delete b.discardedStates[h];return!0};b.emulated.hashChange&&(b.hashChangeInit=function(){b.checkerFunction=null;var e="",h,r,n;b.isInternetExplorer()?(h=k.createElement("iframe"),h.setAttribute("id","historyjs-iframe"),h.style.display="none",k.body.appendChild(h),h.contentWindow.document.open(),h.contentWindow.document.close(),r="",n=!1,b.checkerFunction=function(){if(n)return!1;
n=!0;var g=b.getHash()||"",k=b.unescapeHash(h.contentWindow.document.location.hash)||"";g!==e?(e=g,k!==g&&(r=g,h.contentWindow.document.open(),h.contentWindow.document.close(),h.contentWindow.document.location.hash=b.escapeHash(g)),b.Adapter.trigger(c,"hashchange")):k!==r&&(r=k,b.setHash(k,!1));n=!1;return!0}):b.checkerFunction=function(){var g=b.getHash();g!==e&&(e=g,b.Adapter.trigger(c,"hashchange"));return!0};b.intervalList.push(g(b.checkerFunction,b.options.hashChangeInterval));return!0},b.Adapter.onDomLoad(b.hashChangeInit));
b.emulated.pushState&&(b.onHashChange=function(e){var g=b.getHashByUrl(e&&e.newURL||k.location.href);e=null;if(b.isLastHash(g))return b.busy(!1),!1;b.doubleCheckComplete();b.saveHash(g);if(g&&b.isTraditionalAnchor(g))return b.Adapter.trigger(c,"anchorchange"),b.busy(!1),!1;e=b.extractState(b.getFullUrl(g||k.location.href,!1),!0);if(b.isLastSavedState(e))return b.busy(!1),!1;b.getHashByState(e);if(g=b.discardedState(e))return b.getHashByIndex(-2)===b.getHashByState(g.forwardState)?b.back(!1):b.forward(!1),
!1;b.pushState(e.data,e.title,e.url,!1);return!0},b.Adapter.bind(c,"hashchange",b.onHashChange),b.pushState=function(e,g,r,n){if(b.getHashByUrl(r))throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==n&&b.busy())return b.pushQueue({scope:b,callback:b.pushState,args:arguments,queue:n}),!1;b.busy(!0);var l=b.createStateObject(e,g,r),m=b.getHashByState(l),p=b.getState(!1),p=b.getHashByState(p),a=b.getHash();b.storeState(l);b.expectedStateId=l.id;b.recycleState(l);
b.setTitle(l);if(m===p)return b.busy(!1),!1;if(m!==a&&m!==b.getShortUrl(k.location.href))return b.setHash(m,!1),!1;b.saveState(l);b.Adapter.trigger(c,"statechange");b.busy(!1);return!0},b.replaceState=function(c,g,k,n){if(b.getHashByUrl(k))throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==n&&b.busy())return b.pushQueue({scope:b,callback:b.replaceState,args:arguments,queue:n}),!1;b.busy(!0);var l=b.createStateObject(c,g,k),m=b.getState(!1),p=b.getStateByIndex(-2);
b.discardState(m,l,p);b.pushState(l.data,l.title,l.url,!1);return!0});if(b.emulated.pushState&&b.getHash()&&!b.emulated.hashChange)b.Adapter.onDomLoad(function(){b.Adapter.trigger(c,"hashchange")})};"undefined"!==typeof b.init&&b.init()})(window);/*
 Public Domain
 @author Benjamin Arthur Lupton <contact@balupton.com>
 @author James Padolsey <https://gist.github.com/527683>
 Public Domain
 @author Benjamin Arthur Lupton <contact@balupton.com>
 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
 @license New BSD License <http://creativecommons.org/licenses/BSD/>
*/
(function(c,p){var k=c.console||p,g=c.document,b=c.navigator,e=c.sessionStorage||!1,h=c.setTimeout,r=c.clearTimeout,n=c.setInterval,l=c.clearInterval,m=c.JSON,u=c.alert,a=c.History=c.History||{},s=c.history;m.stringify=m.stringify||m.encode;m.parse=m.parse||m.decode;if("undefined"!==typeof a.init)throw Error("History.js Core has already been loaded...");a.init=function(){if("undefined"===typeof a.Adapter)return!1;"undefined"!==typeof a.initCore&&a.initCore();"undefined"!==typeof a.initHtml4&&a.initHtml4();
return!0};a.initCore=function(){if("undefined"!==typeof a.initCore.initialized)return!1;a.initCore.initialized=!0;a.options=a.options||{};a.options.hashChangeInterval=a.options.hashChangeInterval||100;a.options.safariPollInterval=a.options.safariPollInterval||500;a.options.doubleCheckInterval=a.options.doubleCheckInterval||500;a.options.storeInterval=a.options.storeInterval||1E3;a.options.busyDelay=a.options.busyDelay||250;a.options.debug=a.options.debug||!1;a.options.initialTitle=a.options.initialTitle||
g.title;a.intervalList=[];a.clearAllIntervals=function(){var q,b=a.intervalList;if("undefined"!==typeof b&&null!==b){for(q=0;q<b.length;q++)l(b[q]);a.intervalList=null}};a.debug=function(){a.options.debug&&a.log.apply(a,arguments)};a.log=function(){var a=!("undefined"===typeof k||"undefined"===typeof k.log||"undefined"===typeof k.log.apply),b=g.getElementById("log"),d,c,e,h;a?(c=Array.prototype.slice.call(arguments),d=c.shift(),"undefined"!==typeof k.debug?k.debug.apply(k,[d,c]):k.log.apply(k,[d,
c])):d="\n"+arguments[0]+"\n";c=1;for(e=arguments.length;c<e;++c){h=arguments[c];if("object"===typeof h&&"undefined"!==typeof m)try{h=m.stringify(h)}catch(l){}d+="\n"+h+"\n"}b?(b.value+=d+"\n-----\n",b.scrollTop=b.scrollHeight-b.clientHeight):a||u(d);return!0};a.getInternetExplorerMajorVersion=function(){var q=a.getInternetExplorerMajorVersion,b;if("undefined"!==typeof a.getInternetExplorerMajorVersion.cached)b=a.getInternetExplorerMajorVersion.cached;else{b=3;for(var d=g.createElement("div"),c=d.getElementsByTagName("i");(d.innerHTML=
"\x3c!--[if gt IE "+ ++b+"]><i></i><![endif]--\x3e")&&c[0];);b=4<b?b:!1}return q.cached=b};a.isInternetExplorer=function(){return a.isInternetExplorer.cached="undefined"!==typeof a.isInternetExplorer.cached?a.isInternetExplorer.cached:Boolean(a.getInternetExplorerMajorVersion())};a.emulated={pushState:!Boolean(c.history&&c.history.pushState&&c.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(b.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(b.userAgent))),hashChange:Boolean(!("onhashchange"in
c||"onhashchange"in g)||a.isInternetExplorer()&&8>a.getInternetExplorerMajorVersion())};a.enabled=!a.emulated.pushState;a.bugs={setHash:Boolean(!a.emulated.pushState&&"Apple Computer, Inc."===b.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(b.userAgent)),safariPoll:Boolean(!a.emulated.pushState&&"Apple Computer, Inc."===b.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(b.userAgent)),ieDoubleCheck:Boolean(a.isInternetExplorer()&&8>a.getInternetExplorerMajorVersion()),hashEscape:Boolean(a.isInternetExplorer()&&
7>a.getInternetExplorerMajorVersion())};a.isEmptyObject=function(a){for(var b in a)return!1;return!0};a.cloneObject=function(a){a?(a=m.stringify(a),a=m.parse(a)):a={};return a};a.getRootUrl=function(){var a=g.location.protocol+"//"+(g.location.hostname||g.location.host);g.location.port&&(a+=":"+g.location.port);return a+"/"};a.getBaseHref=function(){var a=g.getElementsByTagName("base"),b=null,b="";1===a.length&&(b=a[0],b=b.href.replace(/[^\/]+$/,""));(b=b.replace(/\/+$/,""))&&(b+="/");return b};a.getBaseUrl=
function(){return a.getBaseHref()||a.getBasePageUrl()||a.getRootUrl()};a.getPageUrl=function(){return((a.getState(!1,!1)||{}).url||g.location.href).replace(/\/+$/,"").replace(/[^\/]+$/,function(a,b,d){return/\./.test(a)?a:a+"/"})};a.getBasePageUrl=function(){return g.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a,b,d){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/"};a.getFullUrl=function(b,f){var d=b,c=b.substring(0,1);f="undefined"===typeof f?!0:f;/[a-z]+\:\/\//.test(b)||(d=
"/"===c?a.getRootUrl()+b.replace(/^\/+/,""):"#"===c?a.getPageUrl().replace(/#.*/,"")+b:"?"===c?a.getPageUrl().replace(/[\?#].*/,"")+b:f?a.getBaseUrl()+b.replace(/^(\.\/)+/,""):a.getBasePageUrl()+b.replace(/^(\.\/)+/,""));return d.replace(/\#$/,"")};a.getShortUrl=function(b){var f=a.getBaseUrl(),d=a.getRootUrl();a.emulated.pushState&&(b=b.replace(f,""));b=b.replace(d,"/");a.isTraditionalAnchor(b)&&(b="./"+b);return b=b.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")};a.store={};a.idToState=a.idToState||
{};a.stateToId=a.stateToId||{};a.urlToId=a.urlToId||{};a.storedStates=a.storedStates||[];a.savedStates=a.savedStates||[];a.normalizeStore=function(){a.store.idToState=a.store.idToState||{};a.store.urlToId=a.store.urlToId||{};a.store.stateToId=a.store.stateToId||{}};a.getState=function(b,f){"undefined"===typeof b&&(b=!0);"undefined"===typeof f&&(f=!0);var d=a.getLastSavedState();!d&&f&&(d=a.createStateObject());b&&(d=a.cloneObject(d),d.url=d.cleanUrl||d.url);return d};a.getIdByState=function(b){var f=
a.extractId(b.url),d;if(!f)if(d=a.getStateString(b),"undefined"!==typeof a.stateToId[d])f=a.stateToId[d];else if("undefined"!==typeof a.store.stateToId[d])f=a.store.stateToId[d];else{for(;!(f=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"===typeof a.idToState[f]&&"undefined"===typeof a.store.idToState[f]););a.stateToId[d]=f;a.idToState[f]=b}return f};a.normalizeState=function(b){var f;if(!b||"object"!==typeof b)b={};if("undefined"!==typeof b.normalized)return b;if(!b.data||
"object"!==typeof b.data)b.data={};f={normalized:!0};f.title=b.title||"";f.url=a.getFullUrl(b.url||g.location.href);f.hash=a.getShortUrl(f.url);f.data=a.cloneObject(b.data);f.id=a.getIdByState(f);f.cleanUrl=f.url.replace(/\??\&_suid.*/,"");f.url=f.cleanUrl;b=!a.isEmptyObject(f.data);if(f.title||b)f.hash=a.getShortUrl(f.url).replace(/\??\&_suid.*/,""),/\?/.test(f.hash)||(f.hash+="?"),f.hash+="&_suid="+f.id;f.hashedUrl=a.getFullUrl(f.hash);if((a.emulated.pushState||a.bugs.safariPoll)&&a.hasUrlDuplicate(f))f.url=
f.hashedUrl;return f};a.createStateObject=function(b,f,d){b={data:b,title:f,url:d};return b=a.normalizeState(b)};a.getStateById=function(b){b=String(b);return a.idToState[b]||a.store.idToState[b]||p};a.getStateString=function(b){b={data:a.normalizeState(b).data,title:b.title,url:b.url};return m.stringify(b)};a.getStateId=function(b){return a.normalizeState(b).id};a.getHashByState=function(b){return a.normalizeState(b).hash};a.extractId=function(a){return((a=/(.*)\&_suid=([0-9]+)$/.exec(a))?String(a[2]||
""):"")||!1};a.isTraditionalAnchor=function(a){return!/[\/\?\.]/.test(a)};a.extractState=function(b,f){var d=null,c,e;f=f||!1;(c=a.extractId(b))&&(d=a.getStateById(c));d||(e=a.getFullUrl(b),(c=a.getIdByUrl(e)||!1)&&(d=a.getStateById(c)),!d&&(f&&!a.isTraditionalAnchor(b))&&(d=a.createStateObject(null,null,e)));return d};a.getIdByUrl=function(b){return a.urlToId[b]||a.store.urlToId[b]||p};a.getLastSavedState=function(){return a.savedStates[a.savedStates.length-1]||p};a.getLastStoredState=function(){return a.storedStates[a.storedStates.length-
1]||p};a.hasUrlDuplicate=function(b){var f=!1;return f=(f=a.extractState(b.url))&&f.id!==b.id};a.storeState=function(b){a.urlToId[b.url]=b.id;a.storedStates.push(a.cloneObject(b));return b};a.isLastSavedState=function(b){var f=!1;a.savedStates.length&&(b=b.id,f=a.getLastSavedState(),f=f.id,f=b===f);return f};a.saveState=function(b){if(a.isLastSavedState(b))return!1;a.savedStates.push(a.cloneObject(b));return!0};a.getStateByIndex=function(b){var f=null;return f="undefined"===typeof b?a.savedStates[a.savedStates.length-
1]:0>b?a.savedStates[a.savedStates.length+b]:a.savedStates[b]};a.getHash=function(){return a.unescapeHash(g.location.hash)};a.unescapeHash=function(b){b=a.normalizeHash(b);return b=c.decodeURIComponent(b)};a.normalizeHash=function(a){return a.replace(/[^#]*#/,"").replace(/#.*/,"")};a.setHash=function(b,f){var d,c;if(!1!==f&&a.busy())return a.pushQueue({scope:a,callback:a.setHash,args:arguments,queue:f}),!1;d=a.escapeHash(b);a.busy(!0);(c=a.extractState(b,!0))&&!a.emulated.pushState?a.pushState(c.data,
c.title,c.url,!1):g.location.hash!==d&&(a.bugs.setHash?(c=a.getPageUrl(),a.pushState(null,null,c+"#"+d,!1)):g.location.hash=d);return a};a.escapeHash=function(b){b=a.normalizeHash(b);b=c.encodeURIComponent(b);a.bugs.hashEscape||(b=b.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?"));return b};a.getHashByUrl=function(b){b=String(b).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return b=a.unescapeHash(b)};a.setTitle=function(b){var c=b.title,d;c||(d=a.getStateByIndex(0))&&
d.url===b.url&&(c=d.title||a.options.initialTitle);try{g.getElementsByTagName("title")[0].innerHTML=c.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}g.title=c;return a};a.queues=[];a.busy=function(b){"undefined"!==typeof b?a.busy.flag=b:"undefined"===typeof a.busy.flag&&(a.busy.flag=!1);if(!a.busy.flag){r(a.busy.timeout);var c=function(){var b,e;if(!a.busy.flag)for(b=a.queues.length-1;0<=b;--b)e=a.queues[b],0!==e.length&&(e=e.shift(),a.fireQueueItem(e),a.busy.timeout=h(c,
a.options.busyDelay))};a.busy.timeout=h(c,a.options.busyDelay)}return a.busy.flag};a.busy.flag=!1;a.fireQueueItem=function(b){return b.callback.apply(b.scope||a,b.args||[])};a.pushQueue=function(b){a.queues[b.queue||0]=a.queues[b.queue||0]||[];a.queues[b.queue||0].push(b);return a};a.queue=function(b,c){"function"===typeof b&&(b={callback:b});"undefined"!==typeof c&&(b.queue=c);a.busy()?a.pushQueue(b):a.fireQueueItem(b);return a};a.clearQueue=function(){a.busy.flag=!1;a.queues=[];return a};a.stateChanged=
!1;a.doubleChecker=!1;a.doubleCheckComplete=function(){a.stateChanged=!0;a.doubleCheckClear();return a};a.doubleCheckClear=function(){a.doubleChecker&&(r(a.doubleChecker),a.doubleChecker=!1);return a};a.doubleCheck=function(b){a.stateChanged=!1;a.doubleCheckClear();a.bugs.ieDoubleCheck&&(a.doubleChecker=h(function(){a.doubleCheckClear();a.stateChanged||b();return!0},a.options.doubleCheckInterval));return a};a.safariStatePoll=function(){var b=a.extractState(g.location.href);if(!a.isLastSavedState(b))return b||
a.createStateObject(),a.Adapter.trigger(c,"popstate"),a};a.back=function(b){if(!1!==b&&a.busy())return a.pushQueue({scope:a,callback:a.back,args:arguments,queue:b}),!1;a.busy(!0);a.doubleCheck(function(){a.back(!1)});s.go(-1);return!0};a.forward=function(b){if(!1!==b&&a.busy())return a.pushQueue({scope:a,callback:a.forward,args:arguments,queue:b}),!1;a.busy(!0);a.doubleCheck(function(){a.forward(!1)});s.go(1);return!0};a.go=function(b,c){var d;if(0<b)for(d=1;d<=b;++d)a.forward(c);else if(0>b)for(d=
-1;d>=b;--d)a.back(c);else throw Error("History.go: History.go requires a positive or negative integer passed.");return a};if(a.emulated.pushState){var t=function(){};a.pushState=a.pushState||t;a.replaceState=a.replaceState||t}else a.onPopState=function(b,f){var d=!1,d=!1;a.doubleCheckComplete();if(d=a.getHash())return(d=a.extractState(d||g.location.href,!0))?a.replaceState(d.data,d.title,d.url,!1):(a.Adapter.trigger(c,"anchorchange"),a.busy(!1)),a.expectedStateId=!1;(d=(d=a.Adapter.extractEventData("state",
b,f)||!1)?a.getStateById(d):a.expectedStateId?a.getStateById(a.expectedStateId):a.extractState(g.location.href))||(d=a.createStateObject(null,null,g.location.href));a.expectedStateId=!1;if(a.isLastSavedState(d))return a.busy(!1),!1;a.storeState(d);a.saveState(d);a.setTitle(d);a.Adapter.trigger(c,"statechange");a.busy(!1);return!0},a.Adapter.bind(c,"popstate",a.onPopState),a.pushState=function(b,f,d,e){if(a.getHashByUrl(d)&&a.emulated.pushState)throw Error("History.js does not support states with fragment-identifiers (hashes/anchors).");
if(!1!==e&&a.busy())return a.pushQueue({scope:a,callback:a.pushState,args:arguments,queue:e}),!1;a.busy(!0);var g=a.createStateObject(b,f,d);a.isLastSavedState(g)?a.busy(!1):(a.storeState(g),a.expectedStateId=g.id,s.pushState(g.id,g.title,g.url),a.Adapter.trigger(c,"popstate"));return!0},a.replaceState=function(b,f,d,e){if(a.getHashByUrl(d)&&a.emulated.pushState)throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==e&&a.busy())return a.pushQueue({scope:a,
callback:a.replaceState,args:arguments,queue:e}),!1;a.busy(!0);var g=a.createStateObject(b,f,d);a.isLastSavedState(g)?a.busy(!1):(a.storeState(g),a.expectedStateId=g.id,s.replaceState(g.id,g.title,g.url),a.Adapter.trigger(c,"popstate"));return!0};if(e)try{a.store=m.parse(e.getItem("History.store"))||{}}catch(v){a.store={}}else a.store={};a.normalizeStore();a.Adapter.bind(c,"beforeunload",a.clearAllIntervals);a.Adapter.bind(c,"unload",a.clearAllIntervals);a.saveState(a.storeState(a.extractState(g.location.href,
!0)));e&&(a.onUnload=function(){var b,c;try{b=m.parse(e.getItem("History.store"))||{}}catch(d){b={}}b.idToState=b.idToState||{};b.urlToId=b.urlToId||{};b.stateToId=b.stateToId||{};for(c in a.idToState)a.idToState.hasOwnProperty(c)&&(b.idToState[c]=a.idToState[c]);for(c in a.urlToId)a.urlToId.hasOwnProperty(c)&&(b.urlToId[c]=a.urlToId[c]);for(c in a.stateToId)a.stateToId.hasOwnProperty(c)&&(b.stateToId[c]=a.stateToId[c]);a.store=b;a.normalizeStore();e.setItem("History.store",m.stringify(b))},a.intervalList.push(n(a.onUnload,
a.options.storeInterval)),a.Adapter.bind(c,"beforeunload",a.onUnload),a.Adapter.bind(c,"unload",a.onUnload));if(!a.emulated.pushState&&(a.bugs.safariPoll&&a.intervalList.push(n(a.safariStatePoll,a.options.safariPollInterval)),"Apple Computer, Inc."===b.vendor||"Mozilla"===(b.appCodeName||"")))if(a.Adapter.bind(c,"hashchange",function(){a.Adapter.trigger(c,"popstate")}),a.getHash())a.Adapter.onDomLoad(function(){a.Adapter.trigger(c,"hashchange")})};a.init()})(window);
